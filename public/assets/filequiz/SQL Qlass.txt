CREATE TABLE GURU
(
  idGuru INT NOT NULL AUTO_INCREMENT,
  nmGuru VARCHAR(100) NOT NULL,
  emailGuru VARCHAR(100) NOT NULL,
  pwdGuru VARCHAR(100) NOT NULL,
  PRIMARY KEY (idGuru)
);

CREATE TABLE MURID
(
  idMurid INT NOT NULL AUTO_INCREMENT,
  nmMurid VARCHAR(100) NOT NULL,
  pwdMurid VARCHAR(100) NOT NULL,
  PRIMARY KEY (idMurid)
);

CREATE TABLE KELAS
(
  idKelas INT NOT NULL AUTO_INCREMENT,
  nmKelas VARCHAR(100) NOT NULL,
  kuotaKelas INT NOT NULL,
  kodeKelas VARCHAR(100) NOT NULL,
  idGuru INT NOT NULL,
  PRIMARY KEY (idKelas),
  FOREIGN KEY (idGuru) REFERENCES GURU(idGuru)
);

CREATE TABLE QUIZ
(
  idQuiz INT NOT NULL AUTO_INCREMENT,
  judulQuiz VARCHAR(100) NOT NULL,
  tglQuiz DATE NOT NULL,
  tipeQuiz VARCAR(100) NOT NULL,
  wktMulaiQuiz TIME NOT NULL,
  wktSelesaiQuiz TIME NOT NULL,
  rataQuiz INT,
  tgldibuatQuiz DATETIME NOT NULL,
  idKelas INT NOT NULL,
  PRIMARY KEY (idQuiz),
  FOREIGN KEY (idKelas) REFERENCES KELAS(idKelas)
);

CREATE TABLE INFO
(
  idInfo INT NOT NULL AUTO_INCREMENT,
  judulInfo VARCHAR(500) NOT NULL,
  tgldibuatInfo DATETIME NOT NULL,
  isiInfo TEXT NOT NULL,
  idKelas INT NOT NULL,
  PRIMARY KEY (idInfo),
  FOREIGN KEY (idKelas) REFERENCES KELAS(idKelas)
);

CREATE TABLE SOAL
(
  idSoal INT NOT NULL AUTO_INCREMENT,
  judulSoal VARCHAR(500) NOT NULL,
  idQuiz INT NOT NULL,
  PRIMARY KEY (idSoal),
  FOREIGN KEY (idQuiz) REFERENCES QUIZ(idQuiz)
);

CREATE TABLE KEANGGOTAAN
(
  idAnggota INT NOT NULL AUTO_INCREMENT,
  idMurid INT NOT NULL,
  idKelas INT NOT NULL,
  PRIMARY KEY (idAnggota),
  FOREIGN KEY (idMurid) REFERENCES MURID(idMurid),
  FOREIGN KEY (idKelas) REFERENCES KELAS(idKelas)
);

CREATE TABLE PILGAN
(
  idPilgan INT NOT NULL AUTO_INCREMENT,
  tnyPilgan TEXT NOT NULL,
  aPilgan TEXT NOT NULL,
  bPilgan TEXT NOT NULL,
  cPilgan TEXT NOT NULL,
  dPilgan TEXT NOT NULL,
  benarPilgan TEXT NOT NULL,
  idSoal INT NOT NULL,
  PRIMARY KEY (idPilgan),
  FOREIGN KEY (idSoal) REFERENCES SOAL(idSoal)
);

CREATE TABLE ISIAN
(
  idIsian INT NOT NULL AUTO_INCREMENT,
  tnyIsian TEXT NOT NULL,
  benarIsian TEXT,
  idSoal INT NOT NULL,
  PRIMARY KEY (idIsian),
  FOREIGN KEY (idSoal) REFERENCES SOAL(idSoal)
);

CREATE TABLE FILEQUIZ
(
  idFile INT NOT NULL AUTO_INCREMENT,
  nmFile VARCHAR(500) NOT NULL,
  idInfo INT,
  idQuiz INT,
  idPilgan INT,
  idIsian INT,
  PRIMARY KEY (idFile),
  FOREIGN KEY (idInfo) REFERENCES INFO(idInfo),
  FOREIGN KEY (idQuiz) REFERENCES QUIZ(idQuiz),
  FOREIGN KEY (idPilgan) REFERENCES PILGAN(idPilgan),
  FOREIGN KEY (idIsian) REFERENCES ISIAN(idIsian)
);

CREATE TABLE NILAI
(
  idNilai INT NOT NULL AUTO_INCREMENT,
  totalNilai INT NOT NULL,
  idMurid INT NOT NULL,
  idSoal INT NOT NULL,
  PRIMARY KEY (idNilai),
  FOREIGN KEY (idMurid) REFERENCES MURID(idMurid),
  FOREIGN KEY (idSoal) REFERENCES SOAL(idSoal)
);

CREATE TABLE JAWABAN
(
  idJwban INT NOT NULL AUTO_INCREMENT,
  isiJwban TEXT NOT NULL,
  poinJwban INT,
  idMurid INT NOT NULL,
  idIsian INT NOT NULL,
  PRIMARY KEY (idJwban),
  FOREIGN KEY (idMurid) REFERENCES MURID(idMurid),
  FOREIGN KEY (idIsian) REFERENCES ISIAN(idIsian)
);